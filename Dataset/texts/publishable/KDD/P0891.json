{
  "ABSTRACT": "In this study, we evaluate causal inference estimators for onlinecontrolled bipartite graph experiments in a real marketplace set-ting. Our novel contribution is constructing a bipartite graph usingin-experiment data, rather than relying on prior knowledge or his-torical data, the common approach in the literature published todate. We build the bipartite graph from various interactions be-tween buyers and sellers in the marketplace, establishing a novelresearch direction at the intersection of bipartite experiments andmediation analysis. This approach is crucial for modern market-places aiming to evaluate seller-side causal effects in buyer-sideexperiments, or vice versa. We demonstrate our method using his-torical buyer-side experiments conducted at Vinted, the largestsecond-hand marketplace in Europe with over 80M users.",
  "Leading author, work completed in partial fulfillment of the requirements for aBachelor of Mathematics degree at Vilnius University": "Permission to make digital or hard copies of all or part of this work for personal orclassroom use is granted without fee provided that copies are not made or distributedfor profit or commercial advantage and that copies bear this notice and the full citationon the first page. Copyrights for components of this work owned by others than theauthor(s) must be honored. Abstracting with credit is permitted. To copy otherwise, orrepublish, to post on servers or to redistribute to lists, requires prior specific permissionand/or a fee. Request permissions from -UC24, August 2529, 2024, Barcelona, Spain 2024 Copyright held by the owner/author(s). Publication rights licensed to ACM.ACM ISBN 978-1-4503-XXXX-X/18/06 effects accurately, such as changes to user interface elements orrecommendation algorithms .In social networks and marketplaces experiment designs extendbeyond simple randomised control trials , wherethe response of any experiment unit (user) under treatment is de-pendent on the response of another unit under treatment. This isknown as violation of the Stable Unit Treatment Value Assumption(SUTVA) or interference . In two sided marketplaces the levelof interference depends on the supply and demand dynamics .An engineering team in a marketplace setting, may want torun a buy side experiment, yet want to know the causal effect onthe sell side. For instance, they might test a feature to increasebuyer engagement and wish to quantify whether this interventionpositively impacts seller outcomes without causing adverse affects.This scenario fits well within a bipartite experiment framework,where we assign treatments to one set of units (buyers) and measureoutcomes for another set of units (sellers). The two sets of units areconnected by a bipartite graph, governing how the treated unitscan affect the outcome units.Bipartite experiment analysis methods published to date, haveonly considered graphs based on pre-experimental data. In contrast,in this work we use graphs constructed using in-experiment datausing various interaction events. We test various inference methodsproposed to date, and propose new inference variants. We also showthat bipartite graphs constructed using different interaction eventslead to different estimates - signaling a promising research directionat the intersection between bipartite experiments and mediationanalysis.This work is organized as follows. In we introducerandomized experiments, potential outcome framework as well keynotation and terms for bipartite experiments. We discuss relatedwork in . In we build up intuition on how bipartitegraphs can be constructed using in-experiment data in a largemarketplace. We then introduce the considered inference methodsand review their results in Sections 5 and 6, and discuss future workin .",
  "KDD-UC24, August 2529, 2024, Barcelona, SpainPilkauskaite et al": ": Bipartite Graph adapted for Vinted Marketplace,treated buyers can interact with many sellers and their items,thus violating the SUTVA assumption. Exposure Score ()(1) can be calculated for both Items and Sellers. ensuring unbiased estimates of treatment effects by mitigating con-founding factors. This method is widely used to infer the causalimpact of various changes in user interfaces, recommendation al-gorithms, and other features to enhance user engagement and sat-isfaction .The potential outcomes framework is fundamental for causal in-ference in experiment designs, including bipartite experiments. Foreach unit , we define ( = 1) as the outcome if the unit receivesthe treatment (where = 1 indicates treatment) and ( = 0) asthe outcome if the unit does not receive the treatment (where = 0indicates control). The causal effect for unit is then (1) (0).Since we can only observe one of these outcomes for each unit, thechallenge lies in estimating the unobserved potential outcome. Byleveraging randomization, we can estimate the average treatmenteffect (ATE), denoted as , which is the difference in mean outcomesbetween the treatment and control groups. Formally, the ATE isdefined as = [ (1)][ (0)], where denotes the expectation.Bipartite experiment, further builds on the above setup by hav-ing two distinct groups of units: the diversion units, which arerandomized to receive the treatment, and the outcome units, wherethe outcomes are measured. Unlike traditional experiments wherethese groups are the same, bipartite experiments separate them.This dependence is represented by a bipartite graph linking diver-sion units to outcome units. In the bipartite graph, the set of diversion units is denoted as and the set of outcome units as. Each diversion unit receives a random binary treatment (0 or1), forming a vector = (1,2, . . . ,) where {0, 1}. Eachoutcome unit in has a potential outcome function (), whichmaps the treatment assignments to the observed value.Causal inference of ATE in a bipartite experiment relies ontwo assumptions . First, Linear Exposure Assumption states thatthe treatment assignments influences the potential outcomes onlythrough a linear combination. More formally, for each outcome",
  "=1,(1)": "Where, , = 1, i.e. the weights incident to an outcomeunit are normalized to sum to one.Second, Linear Response Assumption suggests that the potentialoutcome for each outcome unit is a linear function of its expo-sure. This means for each outcome unit in , there are specificparameters (intercept) and (slope) such that",
  "RELATED WORK": "Using bipartite graphs to estimate causal impact of treatment toone side of units to another was formally introduced by Zigler et al., to measure the impact of power plants pollution preventiontreatments on hospitalization rates at surrounding hospitals.Harshaw et al. developed bipartite experiments theory furtherspecifically for two-sided marketplace settings to mitigate SUTVAviolations. Notably, proposing the first reliable inference methodin bipartite settings - the Exposure-Reweighted Linear (ERL) andvariance estimators that are consistent, unbiased and asymptoticallynormal in sufficiently sparse bipartite graphs. Shi et al. furtherextend previous work by proposing a covariate-adjusted ERL (CR-ERL) estimator to reduce variance, and develop scalable inferencemethods to compute the estimate.In this work we use both ERL and CR-ERL estimators. However,in all of the literature published to date, the structure of a bipartitegraph was fixed before the experiment. Yet our bipartite graph isnot known before the experiment.",
  "CONSTRUCTING BIPARTITE GRAPH USINGIN-EXPERIMENT DATA": "Let us now motivate how a bipartite experiment may be constructedusing in-experiment data in a real marketplace setting such asVinted. Vinted is a largest in Europe marketplace for second-handitems, where a user can upload items to sell, as well as purchaseitems from other users.Product engineering teams at Vinted routinely conduct exper-iments on buy or sell side of the marketplace, and would benefitfrom bipartite experiment design. For the rest of this work we willfocus on a scenario where a team is conducting a buyer-side experi-ment, and would like to measure seller-side outcomes. To constructa bipartite graph in this setting we set the diversion units as buyerswho receive the treatment, and sellers as outcome units.Unlike in the literature published to date, one cannot know inadvance which sellers the randomized buyers will engage with.Therefore to establish links between the diversion and outcome",
  "Towards Measuring Sell Side Outcomes in Buy Side Marketplace Experiments using In-Experiment Bipartite GraphKDD-UC24, August 2529, 2024, Barcelona, Spain": "comparable results instead of the complex variance estimator sug-gested by . Adjusting for pre-experiment data showed lowerestimates for all methods, which may be due to heavy sellers thatcreate different baselines before the experiment. CR-ERL based es-timates overall show the most satisfactory results. By leveragingpre-experiment data, we conclude that we can be more confidentthat the average treatment effect is not overestimated. As bothbootstrapped and randomization-based inference with ERL showedsimilar results, they can be used to validate consistency between thetwo methods in specific experiments. These techniques are recom-mended when pre-experiment metrics are difficult to obtain. Whileregression is the least computationally expensive method, otherapproaches are preferable due to stronger theoretical guarantees.",
  "(4)": "here is an estimate for Average Treatment Effect (ATE). Wherethe exposure () and metrics () were calculated for everyseller in the bipartite graph constructed using either item view orfavorite events that happened during the experiment.To estimate variance of the ATE, Harshaw et al. proposedthe following estimator of the ERL variance:.",
  "=1, (, )(5)": "where the weighting estimators , are used to evaluate Cov( , )terms where is the product of observed outcomes and, (, )is a weighting function which takes the exposures as inputs. It isstated that under the linear response assumption, and assumptionthat for each pair of outcome units , [], the covariance matrix, of their exposures and satisfies the non-degeneracy con-dition, ensuring det(,) > 0, the variance estimator of the ERLpoint estimator is unbiased.Despite the proposed variance estimator, we opted in for a sim-ple bootstrapping based approach for estimating the confidenceintervals for ERL estimator . Reason being that proposed vari-ance estimator (5) computational complexity is (2) because itinvolves a double summation over n units as it calculates pairwiseinteractions between all exposures which is not suitable for theamount of data in Vinteds marketplace - tenths of millions in anexperiment. Second, if we were to even consider smaller samples ofdata, variance estimator (5) is unbiased only when non-degeneracyconditions hold as described in the preliminaries. In our bipar-tite graphs we found that the necessary conditions do not hold astwo outcome units can have identically weighted edges. While theHarshaw et al. proposes an alternative variance estimator thatadjusts the weighting function to handle cases where det(,) = 0,computational complexity issue remains.",
  "Third Approach: Covariate-adjustedExposure Reweighted Linear Estimator": "The final approach we tested on real world experiment data wasthe Covariate-adjusted Exposure Reweighted Linear (CR-ERL) esti-mator proposed by Shi et al. . CR-ERL extends linear exposure-response model by incorporating the pre-experimental outcomesinto the estimator. The advantage of this method was that the pro-posed inference method, based on Monte Carlo randomization, iseasy to implement. The estimator takes the following form:",
  "EXPERIMENTAL DATA AND RESULTS": "To evaluate the above methods in a setting where a bipartite graphis constructed using in experimental data, we took a buyer-sideexperiment in Vinted marketplace. The challenge remains suchthat the true treatment effect is unknown, therefore we selectedan experiment where there is a detected buyer-side effect, andthere is a strong qualitiative evidence for sell-side effects. Thisexperiment sample size consisted of approximately 20 million users,highlighting the importance of computational efficiency as a factorwhen selecting the best estimator.Our findings using the above presented estimators and theirvariants are shown . The top element of the figure cor-responds to treatment effects estimated for continuous sell-sidemetric, and the bottom corresponds to conversion sell-side metric.We demonstrate two metrics as continuous and conversion metricshave different sensitivity. As expected, conversion metric showednarrower confidence intervals and smaller effect size in general asthose metrics are generally less susceptible to outliers and showsmaller variability due to binary nature.All of the above methods were implemented using two differentbipartite graphs using edges based on different types of buyer in-teractions. First bipartite graph edges are constructed using itemviews, and the second graph constructs edges based on favorites.Item views are the primary means by which buyers connect withsellers, as they are the initial interaction that enables all subsequentactions: a favorite event can only occur if an item view has alreadytaken place. Notice that the estimates using bipartite graph created : Comparison of estimates and confidence intervalsfor different methods applied to two bipartite graphs withdifferent buyer interaction events in the same experimentfor two metrics (continuous and conversion). Methods in-clude: Reg (Regression), RegB (Bootstrapped Regression),ERL+B (Bootstrapped ERL Confidence Intervals), ERL+K(Confidence Interval Estimation with Randomization Algo-rithm). \"Pre\" indicates the inclusion of a pre-experimentcovariate. with views events estimated significantly lower average treatmenteffect compared to favorites events for all the methods and bothmetrics. This raises a question of potential mediation effects frombuyers, to their change in viewing or favoring items, to seller sideoutcomes - where the exposure itself is a mediator. However, weleave the exploration of this for future work.To begin our study of the above presented estimators, let usfocus on the second approach, a regression based estimate andits variants, labeled as Reg (Regression), RegB (Bootstrapped Re-gression), ERL+B (Bootstrapped ERL Confidence Intervals), ERL+K(Confidence Interval Estimation with Randomization Algorithm).We found that the estimated coefficient closely matched the firstapproach, an ERL estimate proposed by Harshaw et al. . Thequestion is whether we could trust the confidence intervals, giventhat the diagnostic regression residual plots indicated heteroskedas-ticity and non-normality. Although these assumptions appear to beviolated, it is worth noting that with a large amount of data, theseassumptions are less critical due to the robustness of regressionestimates in large samples. To assess the validity of the regressionconfidence intervals, we also employed bootstrapping to estimatethe regression confidence intervals, labelled as RegB. Results fromregression showed the highest uncertainty with widest confidenceintervals. Although, regression estimated coefficients were consis-tent with other methods. Bootstrapping ERL performed similarlyto the ERL Monte Carlo randomization method, providing fast and",
  "CONCLUSIONS AND FUTURE WORK": "In this work we demonstrated the use of in-experiment data suchas viewing and favorite events in order to construct a bipartitegraph and obtain causal effect estimates using methods proposedin the literature. We compare the precision of different estimatorson a real world experimental data obtained from Vinted, a largestsecondhand marketplace in Europe. Our results, specifically thedifference in the estimated effects between views and favoritesbased bipartite graphs, raise interesting new research avenues forcombining mediation analysis and bipartite experiment inferencemethods. In summary:",
  "It appears practically feasible to use in-experiment data toconstruct exposure scores for causal treatment effect infer-ence in a bipartite experiment design": "Our results demonstrate that non-parameteric methods suchas CR-ERL method proposed by Shi et al. should bepreferred.We leave it for future work to perform a meta-analysis of thesemethods and mediators with a large dataset of historical experi-ments, so that systemic differences in the estimators performancecould be studied . Thomas Blake and Dominic Coey. 2014. Why marketplace experimentation isharder than it seems: the role of test-control interference. In Proceedings of thefifteenth ACM conference on Economics and computation, 567582. Alex Deng, Ya Xu, Ron Kohavi, and Toby Walker. 2013. Improving the sensi-tivity of online controlled experiments by utilizing pre-experiment data. InProceedings of the sixth ACM international conference on Web search and datamining, 123132. Nikos Diamantopoulos, Jeffrey Wong, David Issa Mattos, Ilias Gerostathopou-los, Matthew Wardrop, Tobias Mao, and Colin McFarland. 2020. Engineeringfor a science-centric experimentation platform. In Proceedings of the ACM/IEEE42nd International Conference on Software Engineering: Software Engineering inPractice, 191200.",
  "Dean Eckles, Brian Karrer, and Johan Ugander. 2017. Design and analysis ofexperiments in networks: reducing bias from interference. Journal of CausalInference, 5, 1": "Aleksander Fabijan, Pavel Dmitriev, Helena Holmstrm Olsson, and Jan Bosch.2017. The benefits of controlled experimentation at scale. In 2017 43rd EuromicroConference on Software Engineering and Advanced Applications (SEAA). IEEE,1826. Aleksander Fabijan, Pavel Dmitriev, Helena Holmstrm Olsson, and Jan Bosch.2017. The evolution of continuous experimentation in software product devel-opment: from data to a data-driven organization at scale. In 2017 IEEE/ACM39th International Conference on Software Engineering (ICSE). IEEE, 770780.",
  "Andrey Fradkin. 2019. A simulation approach to designing digital matchingplatforms. Boston University Questrom School of Business Research Paper Forth-coming": "Somit Gupta, Lucy Ulanova, Sumit Bhardwaj, Pavel Dmitriev, Paul Raff, andAleksander Fabijan. 2018. The anatomy of a large-scale experimentation plat-form. In 2018 IEEE International Conference on Software Architecture (ICSA).IEEE, 1109. Christopher Harshaw, Fredrik Svje, David Eisenstat, Vahab Mirrokni, andJean Pouget-Abadie. 2023. Design and analysis of bipartite experiments under alinear exposure-response model. Electronic Journal of Statistics, 17, 1, 464518.",
  "Robert Stine. 1989. An introduction to bootstrap methods: examples and ideas.Sociological Methods & Research, 18, 2-3, 243291": "Nilesh Tripuraneni, Dhruv Madeka, Dean Foster, Dominique Perrault-Joncas,and Michael I Jordan. 2021. Meta-analysis of randomized experiments withapplications to heavy-tailed response data. arXiv preprint arXiv:2112.07602. Ya Xu, Nanyu Chen, Addrian Fernandez, Omar Sinno, and Anmol Bhasin.2015. From infrastructure to culture: a/b testing challenges in large scale socialnetworks. In Proceedings of the 21th ACM SIGKDD International Conference onKnowledge Discovery and Data Mining, 22272236."
}