{
  "ABSTRACT": "The recent past has witnessed a notable surge in on-demand fooddelivery (OFD) services, offering delivery fulfillment within dozensof minutes after an order is placed. In OFD, pooling multiple or-ders for simultaneous delivery in real-time order assignment is apivotal efficiency source, which may in turn extend delivery time.Constructing high-quality order pooling to harmonize platform ef-ficiency with the experiences of consumers and couriers, is crucialto OFD platforms. However, the complexity and real-time nature oforder assignment, making extensive calculations impractical, signif-icantly limit the potential for order consolidation. Moreover, offlineenvironment is frequently riddled with unknown factors, posingchallenges for the platforms perceptibility and pooling decisions.Nevertheless, delivery behaviors of skilled couriers (SCs) whoknow the environment well, can improve system awareness andeffectively inform decisions. Hence a SC delivery network (SCDN)is constructed, based on an enhanced attributed heterogeneousnetwork embedding approach tailored for OFD. It aims to extractfeatures from rich temporal and spatial information, and uncoverthe latent potential for order combinations embedded within SCtrajectories. Accordingly, the vast search space of order assignmentcan be effectively pruned through scalable similarity calculations oflow-dimensional vectors, making comprehensive and high-qualitypooling outcomes more easily identified in real time. In addition,the acquired embedding outcomes highlight promising subspacesembedded within this space, i.e., scale-effect hotspot areas, whichcan offer significant potential for elevating courier efficiency.SCDN has now been deployed in Meituan dispatch system. On-line tests reveal that with SCDN, the pooling quality and extenthave been greatly improved. And our system can boost couriers",
  "INTRODUCTION1.1Backgrounds": "In recent years, there has been a remarkable upsurge in the wide-spread adoption of on-demand food delivery (OFD) services world-wide. With a mere few clicks, consumers can enjoy delicious mealswithout stepping out, all delivered right to their doorstep withinjust a few dozen minutes. This trend is attributable to the overarch-ing shifts in technological innovation, including the popularity ofapps and online platforms, and the growing dependence on third-party services for OFD. Global revenues for OFD sector were about$90 billion in 2018, rose to $294 billion in 2021, and are expected toexceed $466 billion by 2026 . Meituan Waimai, Chinas pioneer-ing OFD platform has witnessed remarkable growth over the lastdecade. In 2023, the platform handles over 70 million orders daily,encompassing an extensive reach across almost 3,000 cities, coun-ties and regions throughout China. 6.24 million couriers earnedincome via Meituan, with over 1 million actively engaged daily.In OFD, orders are placed continuously by consumers from var-ious locations. In response, the platform promptly gathers thesenewly initiated orders, channels them to merchants, and assignsdedicated couriers for pick-up and delivery within the promiseddelivery time. The platforms act as intermediaries, linking a multi-tude of consumers, merchants and couriers within the ecosystem,and strike a balance between gains and losses among these stake-holders to achieve sustained growth and prosperity . Amongthese, consumers desire prompt services, merchants seek to main-tain food freshness, couriers aim to fulfill enough orders to earn a",
  ": A couriers concurrent execution and route se-quence of four orders": "In this context, couriers often engage in concurrent executionof multiple delivery tasks, including order pick-up and delivery. Apivotal efficiency source in OFD is to pool multiple ordersfor simultaneous delivery of a single courier in order as-signment, leveraging shared pick-up and delivery behaviours andtravelling distances, enabling couriers serve more orders withincommitted delivery time limits. Facilitating comprehensive orderpooling can effectively reduce delivery costs and enhance OFDsustainability. (a) presents a high-quality orderpooling example, where the couriers pickup points are highlyconcentrated, and the delivery destinations are aligned along acoherent route, enabling the courier to fulfill the deliveries withremarkable efficiency. However, unreasonable order pooling mayresult in detours and prolonged delivery times, severely undermin-ing the stakeholders experiences. (b) illustrates a scenarioin which unreasonable order pooling negatively impacts a couriersroute, leading to an inefficient delivery trajectory.In Meituan Waimai, the dispatch system conducts city-level batchorder assignments every 30 seconds. In each dispatch cycle, thesystem identifies available couriers for new orders, and assessesthe matching degree (MD) between them, including convenienceof route, over-time risk, and courier acceptance willingness. Thisevaluation process demands massive computations for pick-up anddelivery route planning (PDRP) to simulate couriers behaviorsafter accepting orders . Subsequently, through the resolution ofa multi-objective many(order)-to-one(courier) assignment (MOA)problem, the system matches orders with the most suitable couriersto optimize the overall MD scores.Constructing comprehensive and high-quality order pool-ing in order assignments stands as a key issue for OFD plat-forms to harmonize platform efficiency with stakeholder experi-ence. Practically, there are two primary methods to facilitate com-prehensive and high-quality order pooling in order assignmentsduring each dispatch cycle. The first approach entails identifyingsuitable order combinations among all the pending orders, suchas those with shared pick-up/delivery tasks or minimal detours,aiming to increase the ratio of MOA outcomes. The second ap-proach focuses on matching orders with couriers whose existingassignments can share pick-up/delivery tasks or travel routes withthe new orders, thereby optimizing the delivery process.",
  ": Order pooling examples": "(1) Computational complexity in real time. On one hand,the MD scores based on PDRP outcomes, are non-additive. Specif-ically, the MD score of assigning multiple orders concurrently toa courier, is not equivalent to the sum of the scores of assigningeach order individually to the same courier. Hence, to model theMOA problem and to obtain sufficient order combination resultsusually demands massive MD score calculations, which suffers fromcombinatorial explosion, as depicted in . The MOA problemdetails can be found in Appendix A. For some big cities in Chinaduring noon peak, there amounts to over 3 thousand orders 1 tobe assigned in each dispatch cycle, while each order can retrievehundreds of couriers available for delivery on average. Assumingat most 5 orders assigned to a courier, and the average courier can-didates for a order (combination) is 100, the calculation volume is",
  "Harvesting Efficient On-Demand Order Pooling from Skilled CouriersConference acronym XX, June 0305, 2018, Woodstock, NY": ": Order combination mechanism pruning MOAsearch space using HPP information. For example, for can-didate orders A, B, C, and combinations AB, AC, BC, if ABand AC have higher HPP, then only AB, AC, B and C are pre-served for MD evaluation, while A and BC can be eliminated. where the courier is currently located and ending at its delivery AOI.This further helps to prune the MOA search space and reduce real-time computational pressure while maintaining solution quality, asshown in .",
  ": Calculation volume and search space for modelingand solving MOA problems in each dispatch cycle": "(2) Limited system awareness on the last mile\" offlineenvironment. In OFD, the \"last mile\" offline environment is highlyintricate and dynamic , encompassing unforeseen road closures,unknown natural obstacles, and pandemic-related lockdowns. OFDplatforms are unable to fully access these extensive, finely-detailedspatiotemporal data during large-scale decision-making, due toinsufficient map precision and digital capabilities, along with com-putational and storage constraints. Consequently, order poolingdecisions based on coarse data and limited awareness, may notbe reasonable, potentially harming courier experiences, causingdelivery delays, and reducing delivery efficiency.",
  "Related Work": "Prior research on order pooling algorithms primarily focused onbatching issues in traditional warehouse management .However, the more relaxed time constraints of warehouse batchingalgorithms, typically in minutes, or even hours, are not well-suitablefor the urgency required in OFD.In recent years, research pertaining to OFD has gradually gainedtraction. The prevalent method for order pooling batches ordersbased on geographical proximity and closeness of their promiseddelivery time . However, while these criteria-based batchingrules are straightforward, they limit the scope for consolidation. Anexact algorithm for order batching and assignment is proposed in, under the unrealistic assumption of perfect information aboutthe arrival of orders. The study in produces monthly OFD taskgroupings offline to facilitate order consolidation, However, theireffectiveness is heavily reliant on order structure stability. Work in achieve order consolidation using iterative clustering onan order graph, but the batching algorithms complexity and com-putational load hinder real-time processing. Similar work in leverages additional decomposition mechanisms to reduce com-putational cost, yet it falls short of enabling real-time applicationdespite notable performance gains. To satisfy the need for solutionswithin seconds, XGBoost models are built through supervised learn-ing on historical order assignment results in , to promotecombined order assignments. However, the consolidation resultsstruggle to break through the constraints of historical decisions,resulting in limited effectiveness.",
  "Motivations": "In light of the limitations present in existing work, its worth notingthat OFD platforms are equipped with a vast fleet of couriers, andextensive data on courier behaviors, especially from the skilled ones,which offer insights for high-efficiency and quality delivery ser-vices and enhance system intelligence. Skilled couriers (SCs) oftenpossess a comprehensive grasp of the offline environment, includ-ing order distribution and road logistics, and continually improvetheir delivery skills to adapting to complex conditions. Moreover,our couriers can reject or transfer system-assigned orders, lever-aging their expertise to optimize routes, minimizing detours andovertime. Additionally, the platform gathers courier preferencesfor pick-up and delivery locations via their apps, promoting effi-cient operations with fewer bottlenecks. Thus SCs behavioursof order selection, route sequence and feedback can providethe system superior courier-oriented pooling outcomes andhelp improve decision quality.In the past decade, the work on word representation learninghas achieved cutting-edge results . Neural languagemodels replace traditional high-dimensional and sparse word vec-tors with low-dimensional and dense embeddings, which assumethat frequently co-occurring words share stronger statistical depen-dencies. Recently, graph representation learning (GRL) methods have increasingly been applied in various fields, includinge-commerce , job search , ride-sharing ,to discover diverse types of recommendations on the Web. Theseapproaches have had a major impact in both academia and industry.Drawing on prior achievements and the principle that ordersfrequently combined together in SCs routes tend to yieldtop-tier pooling results, this paper aims to using GRL methodsto uncover the latent potential for order pooling embeddedwithin the SCs behaviour data. Therefore, through scalablelow-dimension vector calculations, instead of massive and time-consuming PDRP computations, we effectively prune the MOAproblems search space, shown in , meanwhile extractsmall-scale and isolated subspaces promising for high-quality orderconsolidation results, facilitating real-time, effective order pooling.",
  "Contributions": "Accordingly, a systemic solution framework, named as SC deliverynetwork (SCDN), is proposed. The novel contributions are:(1) Graph Modelling: We construct a delivery network fromSC route sequences, with flow unit (FU) as nodes linked by SCbehavior sequences. An FU is a directed vector from pick-up areasof interest (AOI 2) to delivery AOI. Orders of an FU share the",
  "Conference acronym XX, June 0305, 2018, Woodstock, NYYile Liang et al": "Olivier Briant, Hadrien Cambazard, Diego Cattaruzza, Nicolas Catusse, Anne-Laure Ladier, and Maxime Ogier. 2020. An efficient and general approach for thejoint order batching and picker routing problem. European journal of operationalresearch 285, 2 (2020), 497512. Yukuo Cen, Xu Zou, Jianwei Zhang, Hongxia Yang, Jingren Zhou, and Jie Tang.2019. Representation learning for attributed multiplex heterogeneous network.In Proceedings of the 25th ACM SIGKDD international conference on knowledgediscovery & data mining. 13581368. Jing-Fang Chen, Ling Wang, Hao Ren, Jize Pan, Shengyao Wang, Jie Zheng, andXing Wang. 2022. An imitation learning-enhanced iterated matching algorithmfor on-demand food delivery. IEEE Transactions on Intelligent TransportationSystems 23, 10 (2022), 1860318619.",
  "AMHEN Construction": "The AMHEN is constructed based on SC route sequences as de-scribed below. The definition of SC and selection criteria of SCroute sequences are introduced in Appendix B.We first divide a SCs route sequence into distinct sessions, usingthe rest or no action interval as a separator, presently set to 30 min-utes. Then we transform the route sessions into FU sequences viareplacing the orders in the sessions with their FUs. Since couriers 3A circular area with a diameter of 3-5 km, and the couriers designated residence asthe center.4defined as the interval between picking up the current order and the preceding onein the couriers route. participate in both pick-up and delivery actions during order fulfil-ment, there are two kinds of FU sequences: one based on pick-upbehavior and the other on delivery, as shown in . Diversecouriers FU sequences may incorporate some common FUs. : Illustration of AMHEN Construction, including 2sessions. Session A contains 3 orders for FUs DE, FB and FC.The pick-up FU sequence is DE->FC->FB. And the delivery FUsequence is DE->FB->FC. Session B follows the same process. To capture shared experiences of SCs, by treating FU as nodesand their connections in the FU sequence as links, we can integrateall the FU sequences into a unified yet heterogeneous graph. More-over, it is crucial to utilize the rich temporal and spatial informationto enhance learning accuracy, e.g. average historical order amountand delivery distance of each FU, which makes the above graph anAMHEN. More about node attributes is in Appendix C.Denote AMHEN by = (, ,), where is the FU node set, is the attribute set for all nodes. FU node owns fruitfulattributes x to describe its crucial characters. = (, ) isthe set of edges, which contains two types: pick-up and delivery.Specifically, there may be two types of edges between the FU nodes and , where indicates a pick-up edge and adelivery one. If two orders, belonging to FU nodes and , aresuccessively picked up by the same SC, there exists a pick-up edge connecting and . Similarly, a delivery edge indicatesthere exist orders of FU nodes and that are consecutivelydelivered by the same SC. Hence, an AMHEN is constructed bymerging massive records from tens of thousands of SCs.",
  "Graph Representation Learning Model": "Treating the AMHEN as input, we apply the model in GATNE to produce node vector representation, i.e. FU embedding, whichcan be regarded as the aggregation of various node attributes andtopology information in the graph, as depicted in .We divide the whole embedding of node on each edge type into two parts, base embedding and edge embedding. The baseembedding b is defined as a parameterized function of its attributesx as b = h (x), where h is a transformation function, while thek-th level edge embedding u(), R, (1 ) of node onedge type is aggregated from the edge embeddings of neighbors:",
  "where {,} indicates the edge type, is the dimension of edgeembeddings, and N, is the neighbors of node on edge type .The initial edge embedding u(0), is parameterized as the function of": "attributes x : u(0), = g (x), where g is a transformation function.The aggregator function is mean operation in practice.We denote the -th level edge embedding u(),by u,. Then thepick-up edge embedding u, and the delivery edge embedding u,of node are combined as U = u,, u,. Given that the pick-up edge and delivery edge have different impacts, self attentionmechanism is used to calculate the weights a, a,, a,.",
  "v, = h (x) + a,M u, + gx,(4)": "where and indicate importance of pick-up and delivery edgeembeddings, respectively, characterizing how pick-up and deliverybehaviors affect courier efficiency. M, M R are trainableparameters. and control the importance of node attributes.The FU embedding v is the average of v, and v,. The detailedimplementation of EATNE can be found in Appendix D.",
  "Model Optimization": "The positive data for training is generated by a meta-path-basedrandom walk method and skip-gram model . Given a set ofpick-up FU sequences , supposing that random walk with length on follows a path = 1, . . . , , the pick-up context of is denoted as = , | , , where isthe size of the sampling window. Thus, given a node and its allpick-up contexts, we can generate a positive pick-up data set Dof positive pairs (, ), which indicates SCs frequently pool theorders of these FU together. Similarly, we can generate a positivedata set D from the delivery FU sessions.Negative Sampling. Since couriers usually move within a con-fined region, negative samples from different regions are so easy forthe model to distinguish in the whole training stage which makesthe learning inefficient. Therefore, the negative data sets D , D are constructed by random sampling from pick-up and deliveryFU pairs in the same delivery region but excluding positive pairs,respectively. In other words, we select k-hop (k>2) neighbors of theFU node that share the same confined region as the challengingnegative samples to enable the effective training of the proposedmodel. Traditional GATNE uses randomized negative sampling, yetignores the regional effects in OFD. We find that the performanceof GATNE decreases as the negative sampling scope expands andthe effect becomes almost random as it reaches the city size.Margin Ranking Loss. The learning task is to make the repre-sentation of positive FU pairs lying nearby in the embedding space,and the negative pairs different. However, achieving this with cross-entropy can be challenging. Therefore, a customized optimizationobjective based on margin ranking loss is proposed to maximizethe distance between positive and negative samples in Equation5, where , , and are hyperparmeters representing theweights of various data sets, and are the minimum distancebetween negative pairs for pick-up and delivery, and cos representsthe cosine similarity between FU embeddings.",
  "Embedding Coverage Improvement": "SC behaviors cover only 60% FUs. To compensate for the loss, weconstruct an extended delivery network based on geographicaladjacency, shown in . The criterion for judging spatialadjacency between FUs is the pick-up AOIs should be same 5 and thedistance between delivery point is less than a threshold (currently1km). If no adjacent FUs found, we will relax it to only considerthe same pick-up AOI as a fallback. Then the embeddings of FUspreviously unseen, can be estimated by aggregating the embeddingsof their existing neighboring FUs in the network constructed above.This increases FU embedding coverage to over 80%.",
  "Information Mining": "Leveraging the FU embeddings, weve created a set of indices.(1) High-quality pooling probability (HPP) quantifies howwell multiple orders can be consolidated together, sharing commonpick-up and delivery times and travel distances. Since two FUs thatconsecutively appear in the SC behavior sequence often possessthe above traits, this metric is calculated by the cosine similarity be-tween the FU embeddings of these orders, reflecting the frequencyof consecutive co-occurrence of the two FUs in SC behavior data.",
  "= (v, v), , (6)": "Orders with high HPP values can be consolidated and assigned tothe same courier to achieve efficient delivery.(2) FU efficiency indicator (FEI) measures how much an or-der in this FU improves efficiency, based on how likely it is to becombined with orders from other FUs to form an efficient deliverysequence. It is calculated by the weighed aggregate of HPPs for theFU and its neighbouring FUs that share same or nearby pick-up ordelivery AOIs. The weights are determined by the order volume ofthose neighboring FUs.",
  ", (7)": "The higher FEI values, the more likely for the order to be efficientlypooled with other orders, thus improving courier efficiency. FEIvalues are normalized at the city level for ease of comparisons.(3) Scale-effect hotspot (SEH) for OFD refers to a local net-work of geographically proximate FUs, wherein the marginal costand time of delivery for couriers fulfilling orders in this networkprogressively diminishes, allowing for comprehensive order con-solidation within promised delivery time. In accordance, FUs in anSEH should have high FEI values, and any pair of FUs in the sameSEH exhibit a relatively high HPP. And the total order volume foreach SEH should exceed certain criteria.",
  ": The main execution process of the dispatch systemin each dispatch cycle": "3.3.1Order Combination and Courier Recall. The MOA problem ofour system is now solved by well-crafted constructive heuristics, i.e.imitation learning-enhanced iterated matching algorithm (ILIMA), since metaheuristic algorithms with in-depth search fail tomeet the real-time requirements . Meanwhile, a few orders arecombined in mutually exclusive groups based on the closeness oftheir origins and destinations, as well as promised delivery time,before MD score evaluation. However, the real-time performanceseverely restricts the search depth of the algorithm, resulting ininsufficient and suboptimal order pooling.With SCDN, we develop scalable mechanisms for courier recalland order combination, which can cut down the MOA search space,and let us focus our limited computation time on promising areas.Generally, orders with high HPP are formed as favorable combi-nations in advance, which can greatly expand the proportion ofcombined orders. Order combinations with low HPP and courierswhose on-hand orders mostly share low HPP with the new orderare filtered out. Hence, we can facilitate high-quality order poolingin real time, without obvious increase in score calculation volumeand computation time.Order Combination. Based on HPP, high-quality order combi-nations can be identified and incorporated into ILIMA as expandingdecision entities rather than single orders. As illustrated in ,on one hand, order combinations with very low HPP can be prunedto avoid unnecessary score calculation. On the other hand, sincetop-tier order combinations found by high HPP should be pooledto the same courier, other combinations containing partial orders,and conflicting orders themselves can be removed from the searchspace. It can guide ILIMA to search deeply and effectively withoutobviously increasing score calculation volume.Courier Recall. When retrieving available couriers for an order(combination), we calculate the average value of HPP between itand the couriers on-hand orders, to quickly estimate MD betweenthe order (combination) and the courier, instead of time-consumingscore calculations. For the on-hand orders already picked up by thecourier, its FU can be considered as the FU starting from the AOI",
  "The implementation details of order combination and courierrecall mechanisms can be found in Appendix F": "3.3.2Highly Efficient Delivery Mode. SEHs identified by SCDN,essentially represent small-scale subspaces deeply embedded withinthe MOA search space, where thorough and high-quality orderpooling outcomes can be found, as shown in . Then a newdelivery mode can be built, wherein a dedicated group of couriersis assigned to each SEH, as opposed to receiving assignments in theentire region. Accordingly, the original large-scale MOA problem,initially solved within a vast search space shown in , canbe effectively decomposed into a collection of small-scale MOAproblems, defined within much smaller and independentsubspaces, paving the way for comprehensive and in-depthreal-time searching. This approach serves to continually enhancethe courier efficiency potential.In the delivery mode, order assignments for each SEH are con-ducted as follows: (1) Hourly SEH Identifications. SEHs for certain time periodsin a city are found using binary programming (BP), which cate-gorizes FUs with high FEI within a specified time period into anumber of mutually exclusive sets. It aims to maximize the aver-age HPP among FUs within each set, with FU quantities and totalhistorical order volume in each set as constraints. Practically, insome mega cities like Beijing, SEHs in peak periods are determinedevery 30 minutes to capture the changes in order structure. The BPproblems for SEH identification can be solved via genetic algorithm within 10 minutes. More information is in Appendix G.",
  ": Promising MOA search subspace described by SEH": "(2) Real-time Parallel MOA Solutions. Order assignment forSEH is a scaled-down MOA problem. Given the limited area andstable order structure for SEH in a certain time period, the behav-ioral patterns of mode couriers are highly certain, thus simplifyingthe MD evaluation. In reality, we evaluate the MD via a weightedsum of average order increments for pick-up and delivery AOIsin a couriers route after the new order acceptance for SEH, in-stead of time-intensive PDRP calculations to simulate couriersroutes. Hence we can evaluate the MD between any promisingorder combinations and candidate couriers in real time, and solvethe completely-modeled MOA problem for each SEH using a Hill-Climbing heuristic algorithm in parallel, helping to pool orderseffectively and thoroughly. Orders outside SEHs keep the existingassignment rules.",
  "EXPERIMENTAL EVALUATION4.1Model Performance Evaluation": "4.1.1Model Learning Performance. Link prediction task is used toevaluate the performance of EATNE, with AUC, F1 score and PR asevaluation criteria. The experiments are conducted on a real-worlddataset collected from Meituan delivery platform, using a singleLinux server with NVIDIA Tesla V100 GPU with 32GB memory. Thedataset contains 28,000 SC behavior records from 28 days in Beijing,China, forming a delivery network with about 70,000 FUs. For eachedge type, the test set is generated with 10% randomly chosenpositive edges and an equal number of negative edges, selected byregional negative sampling. Parameter details are in Appendix E.First we examine the effectiveness of EATNE. showsthat the original GATNE is hard to converge in this situation. WhileEATNE, armed with regional negative sampling and margin loss,produces superior outcomes in addition to converging much faster.Next the performance of EATNE in various graph configurations is",
  ": The convergence curve for different algorithms": "investigated. shows that optimal performance is achievedby graphs with pick-up and delivery edges and node attributes,proving the validity of the proposed ANHEN. Notably, pick-up con-nections are more important than delivery ones, indicating pick-upbehaviours have a greater effect on courier efficiency. Moreover,adding node attributes is highly impactful, highlighting order struc-tures key role in affecting courier efficiency.",
  ": FU embedding clusters of a district in Beijing onmap (left) and after T-SNE (right)": "Next we demonstrate high-quality pooling potential can be cap-tured by FU embedding similarity, i.e. HPP. (a) shows fourcases of FU pairs with high HPP, including (1) FU pair with pick-upand delivery AOIs located closely, (2) nearby parallel FU pair, (3) FU pair where one runs alongside the other, and (4) head-to-tail FUpair, with the tail one pointing high-order-density AOIs, leading toless courier empty run time 6 after completing deliveries. Orders inthese FU pairs can be pooled for simultaneous delivery to improvecourier efficiency. Meanwhile, we also identify FU pairs with lowHPP. (b) illustrates four cases of this situation, including(1) FU pair with the same delivery AOI but pick-up AOIs located farapart, (2) reverse parallel FU pair, (3) FU pair where one FU runsalongside the other but points a low-order-density AOI, leading tolonger courier empty run time, and (4) head-to-tail FU pair that alsoleads to a low-order-density area. These FU pairs are unlikely to beefficiently pooled together and may undermine courier efficiency.",
  "Order Combination and Courier Recall": "The proposed method, ILIMA + SCDN, is evaluated against thecurrent online implementation, which utilizes ILIMA with ruledbatching method, and MNDS, a metaheuristic algorithm used in .Experiments are conducted in a mid-sized Chinese city, involvingaround 500 orders and 2,500 couriers in a dispatch cycle duringnoon peak.The comparison results on both computational cost and solutionquality are presented in . The ILIMA+SCDN approach en-hances the total MD score of MOA solutions by 5.3% compared toILIMA+Rule method, without incurring a significant increase intime consumption. However, it lags by 1.2 behind MNDS. De-spite this, MNDS requires exploration of a much larger search spaceand massive PDRP calculations, which takes over 20 seconds onaverage, making it unsuitable for online use. Hence, the proposedmethod excels at balancing computational time and solution qual-ity, securing more optimal MOA solutions in real-time. Moreover, illustrates that the overall combination level grows asthe percentage of couriers assigned only one order decreases by16.3 . This shift results in increasing order consolidation. OnlineA/B test show that while maitaining delivery experience, couirerefficiency, i.e.orders completed per hour, is augmented by 3.7%. presents the results of offline experiments conductedwith varying order volumes. In different order size scenarios, the",
  ": Combination level distribution": "proposed ILIMA+SCDN method significantly enhances the MDscore over the existing ILIMA+Ruled method. Regarding PDRPCalculations, for orders fewer than 400, our proposed ILIMA+SCDNmethod demonstrates lower PDRP Calculations compared to theILIMA+Ruled method. Nevertheless, as the order volume escalates,the computational burden of both methods exhibits nearly lineargrowth, aligning with the online time requirements.",
  "Highly Efficient Delivery Mode": "depicts 5 SEHs identified in a specific district of Beijingduring weekday noon peak period (11:00-12:59). In response to fluc-tuations in order structures, the network configuration of each SEHis updated every half hour. On average, each SEH processes about81 orders every half hour with an average HPP of 0.65, ensuringhigh order density and strong network connectivity. Moreover, themaximum number of orders pending assignment in each cycle isless than 10. By allocating 5 to 8 couriers per SEH, we significantlysimplify the complexity of MOA solutions for each SEH.Taking a SEH in Beijing as an example, online tests show a majorboost in order pooling. During noon peak, a courier can accept over7 orders at once. And the percentage of SEH couriers picking upover 5 orders simultaneously in the same AOI has risen by 23.5 ppcompared to past performance. Likewise, the percentage of SEHcouriers delivering over 5 orders at once in the same AOI has in-creased by 20 pp. The average courier incremental pick-up time has",
  ": SEHs over time, with each image capturing half anhour. Colors denote different areas, bold lines for internalSEH FUs, and thin lines for external FUs": "been reduced by 51% and delivery time by 21%. These enhancementslead to a 45-55% boost in courier efficiency, i.e.orders completedper hour, while maintaining consistent work hours and on-timedelivery standards. illustrates the superior performanceof SEH mode against city average level in noon peak, where eachbar corresponds to the trial performance of a specific courier.",
  "CONCLUSION": "This paper proposed a systemic solution framework, SCDN, basedon an Enhanced GATNE method tailored for OFD, to resolve real-time OFD order pooling problem. It uncovers the latent poten-tial for order pooling embedded within SC trajectories, which canstrengthen system awareness and effectively inform decisions. Ac-cordingly, the vast search space of NP-hard MOA problems in OFDis effectively pruned through scalable similarity calculations ofsimple vectors. Thus high-quality and comprehensive pooling out-comes are found in real time. Moreover, the outcomes highlightSEHs for OFD, where highly-efficient delivery modes are built forcontinuously improving efficiency. SCDN has now been deployedin Meituan. Online tests show it has achieved excellent performanceand well-acknowledged by all the stakeholders.",
  "Peng Cui, Xiao Wang, Jian Pei, and Wenwu Zhu. 2018. A survey on networkembedding. IEEE transactions on knowledge and data engineering 31, 5 (2018),833852": "Tao Feng, Huan Yan, Huandong Wang, Wenzhen Huang, Yuyang Han, HongsenLiao, Jinghua Hao, and Yong Li. 2023. ILRoute: A Graph-based Imitation Learn-ing Method to Unveil Riders Routing Strategies in Food Delivery Service. InProceedings of the 29th ACM SIGKDD Conference on Knowledge Discovery andData Mining. 40244034. Mihajlo Grbovic and Haibin Cheng. 2018. Real-time personalization using em-beddings for search ranking at airbnb. In Proceedings of the 24th ACM SIGKDDinternational conference on knowledge discovery & data mining. 311320.",
  "Aditya Grover and Jure Leskovec. 2016. node2vec: Scalable feature learning fornetworks. In Proceedings of the 22nd ACM SIGKDD international conference onKnowledge discovery and data mining. 855864": "Qingbo Hu, Sihong Xie, Jiawei Zhang, Qiang Zhu, Songtao Guo, and Philip S Yu.2016. HeteroSales: Utilizing heterogeneous social networks to identify the nextenterprise customer. In Proceedings of the 25th International Conference on WorldWide Web. 4150. Shenggong Ji, Yu Zheng, Zhaoyuan Wang, and Tianrui Li. 2019. Alleviatingusers pain of waiting: Effective task grouping for online-to-offline food deliveryservices. In The World Wide Web Conference. 773783. Manas Joshi, Arshdeep Singh, Sayan Ranu, Amitabha Bagchi, Priyank Karia, andPuneet Kala. 2021. Batching and matching for food delivery in dynamic roadnetworks. In 2021 IEEE 37th International Conference on Data Engineering (ICDE).IEEE, 20992104. Manas Joshi, Arshdeep Singh, Sayan Ranu, Amitabha Bagchi, Priyank Karia, andPuneet Kala. 2022. FoodMatch: Batching and Matching for Food Delivery inDynamic Road Networks. ACM Transactions on Spatial Algorithms and Systems(TSAS) 8, 1 (2022), 125. Krishnaram Kenthapadi, Benjamin Le, and Ganesh Venkataraman. 2017. Person-alized job recommendation system at linkedin: Practical challenges and lessonslearned. In Proceedings of the eleventh ACM conference on recommender systems.346347.",
  "Shima Khoshraftar and Aijun An. 2022. A survey on graph representationlearning methods. arXiv preprint arXiv:2204.01855 (2022)": "Yile Liang, Donghui Li, Jiuxia Zhao, Xuetao Ding, Huanjia Lian, Jinghua Hao, andRenqing He. 2023. Enhancing Dynamic On-demand Food Order Dispatching viaFuture-informed and Spatial-temporal Extended Decisions. In Proceedings of the32nd ACM International Conference on Information and Knowledge Management.47024708. Vittorio Maniezzo, Thomas Sttzle, and Stefan Vo. 2021. Matheuristics. Springer. Eva-Marie Meemken, Marc F Bellemare, Thomas Reardon, and Carolina M Vargas.2022. Research and policy for the food-delivery revolution. Science 377, 6608(2022), 810813. Tomas Mikolov, Ilya Sutskever, Kai Chen, Greg S Corrado, and Jeff Dean. 2013.Distributed representations of words and phrases and their compositionality.Advances in neural information processing systems 26 (2013).",
  "Eduardo G Pardo, Sergio Gil-Borrs, Antonio Alonso-Ayuso, and Abraham Duarte.2023. Order Batching Problems: taxonomy and literature review. European Journalof Operational Research (2023)": "Bryan Perozzi, Rami Al-Rfou, and Steven Skiena. 2014. Deepwalk: Online learningof social representations. In Proceedings of the 20th ACM SIGKDD internationalconference on Knowledge discovery and data mining. 701710. Rohan Ramanath, Hakan Inan, Gungor Polatkan, Bo Hu, Qi Guo, Cagri Ozcaglar,Xianren Wu, Krishnaram Kenthapadi, and Sahin Cem Geyik. 2018. Towards deepand representation learning for talent search at linkedin. In Proceedings of the27th ACM international conference on information and knowledge management.22532261.",
  "Control (CDC). IEEE, 531538": "Michele D Simoni and Matthias Winkenbach. 2023. Crowdsourced on-demandfood delivery: An order batching and assignment algorithm. TransportationResearch Part C: Emerging Technologies 149 (2023), 104055. Jian Tang, Meng Qu, Mingzhe Wang, Ming Zhang, Jun Yan, and Qiaozhu Mei.2015. Line: Large-scale information network embedding. In Proceedings of the24th international conference on world wide web. 10671077. Lei Tang, Zihang Liu, Rongguo Zhang, Zongtao Duan, and Yunji Liang. 2021.Who Will Travel With Me? Personalized Ranking Using Attributed NetworkEmbedding for Pooling. IEEE Transactions on Intelligent Transportation Systems23, 8 (2021), 1231112327. Lei Tang, Zihang Liu, Yaling Zhao, Zongtao Duan, and Jingchi Jia. 2020. Efficientridesharing framework for ride-matching via heterogeneous network embedding.ACM Transactions on Knowledge Discovery from Data (TKDD) 14, 3 (2020), 124. Jizhe Wang, Pipei Huang, Huan Zhao, Zhibo Zhang, Binqiang Zhao, and Dik LunLee. 2018. Billion-scale commodity embedding for e-commerce recommendationin alibaba. In Proceedings of the 24th ACM SIGKDD international conference onknowledge discovery & data mining. 839848. Xing Wang, Ling Wang, Shengyao Wang, Yang Yu, Jing-fang Chen, and Jie Zheng.2021. Solving online food delivery problem via an effective hybrid algorithm withintelligent batching strategy. In International Conference on Intelligent Computing.Springer, 340354.",
  "Baris Yildiz and Martin Savelsbergh. 2019. Provably high-quality solutions for themeal delivery routing problem. Transportation Science 53, 5 (2019), 13721388": "Yang Yu, Qingte Zhou, Shenglin Yi, Huanyu Zheng, Shengyao Wang, JinghuaHao, Renqing He, and Zhizhao Sun. 2021. Delay to group in food delivery system:A prediction approach. In International Conference on Intelligent Computing.Springer, 540551. Lingyu Zhang, Tao Hu, Yue Min, Guobin Wu, Junying Zhang, Pengcheng Feng,Pinghua Gong, and Jieping Ye. 2017. A taxi order dispatch model based oncombinatorial optimization. In Proceedings of the 23rd ACM SIGKDD internationalconference on knowledge discovery and data mining. 21512159. Jie Zheng, Ling Wang, Li Wang, Shengyao Wang, Jing-Fang Chen, and XingWang. 2022. Solving stochastic online food delivery problem via iterated greedyalgorithm with decomposition-based strategy. IEEE Transactions on Systems, Man,and Cybernetics: Systems 53, 2 (2022), 957969. Qingte Zhou, Huanyu Zheng, Shengyao Wang, Jinghua Hao, Renqing He, ZhizhaoSun, Xing Wang, and Ling Wang. 2020. Two fast heuristics for online orderdispatching. In 2020 IEEE Congress on Evolutionary Computation (CEC). IEEE,18. Yida Zhu, Liying Chen, Daping Xiong, Shuiping Chen, Fangxiao Du, JinghuaHao, Renqing He, and Zhizhao Sun. 2023. C-AOI: Contour-based Instance Seg-mentation for High-Quality Areas-of-Interest in Online Food Delivery Platform.In Proceedings of the 29th ACM SIGKDD Conference on Knowledge Discovery andData Mining. 57505759.",
  "AMANY-TO-ONE ASSIGNMENT PROBLEM ATEACH DISPATCH CYCLE": "As shown in , the calculation volume increases very fastwith the number of orders and couriers. Different order combina-tions of order set are considered. For example, the number oforder combinations is | |. Since the MD score of assigningcombinations of orders is not equivalent to the sum of scores ofindividual assignments. The calculation volume of MD score is | | | |, where is the set of couriers for order",
  ": Set vi as the average of v, and v,": "After getting all these MD scores, the MOA problem can be for-mulated into an integer programming problem in Equation (9). Theobjective function is to minimize the total MD scores for differentgoals, and ,, is the MD score of assigning order combination to courier at time for goal , () refers to all the possiblecombinations constructed by orders in , is the weight of goal in the objective function at time . The constraint is to make sureeach combination can only be assigned to one courier and onlyone combination of each order can be selected. () represents theorder combination containing order .",
  "BDEFINITION OF SKILLED COURIER ANDSELECTION CRITERIA OF ROUTE SESSIONS": "As mentioned above, SC refers to the couriers with relatively highefficiency, currently set top rank 5%-35% in a delivery region. Itshould be noted that in order to prevent extreme cases from affect-ing the validity of the learning outcomes, the top 5% of couriershave been excluded.The SC route sessions of both pick-up and delivery type, for con-structing the network are selected based on the following criteria:(1) time interval between the execution of two consecutive ordersless than 30 minutes;(2) no overtime orders;(3) no speeding behaviours;(4) no orders with negative feedback reported.Then based on the carefully selected sessions of SCs, we constructthe corresponding AMHEN using the method outlined in .",
  "We incorporate rich spatial and temporal information as attributesof a FU node, for a specific scenario (i.e., weekday/weekend, peak/i-dle time), mainly including:": "(1) average order volume of FU, and the corresponding pick-upand delivery AOIs in the scenario for last 30 days;(2) average meal-waiting and pick-up time duration of the corre-sponding pick-up AOI in the scenario for last 30 days ;(3) average delivery time duration of the corresponding deliveryAOI in the scenario for last 30 days ;(4) average delivery distance of the FU;(5) average FU delivery period of time since consumers order inthe scenario for last 30 days;(6) type and number of natural barriers (e.g. bridge, river, high-way) along the FU path;(7) latitudes and longitudes of the center points of the corre-sponding pick-up and delivery AOIs;(8) the proportion of SCs who chose the corresponding pick-upand delivery AOIs as their preferred locations for the scenario inthe past 30 days.",
  "F.1Order Combination Mechanism": "Although the above algorithm has good performance in solving,it tends to promote one-to-one assignment results, which is notconducive to sufficient order pooling. To facilitate many-to-one as-signments, high-quality and mutually exclusive order combinationsare identified based on HPP, and incorporated into the algorithm asexpanding entities rather than single orders. The evaluation stageat iteration is executed as follows:",
  "| | ,": "For the on-hand order already picked up by courier , its FUcan be considered as the FU starting from the AOI where thecourier is currently located and ending at its delivery AOI.For the on-hands whose FU embedding is absent, the associ-ated HPP is set as 0.If is lower than threshold 2, courier will be removedfrom the candidate set, i.e. = {}. (2) For = {1,2} , denote the corresponding couriercandidate set as , which is the intersection of courier can-didate sets of 1 and 2. For , calculate the averageHPP of 1 and 2 as Step (1), respectively.",
  "GSEH IDENTIFICATION APPROACH": "We utilize BP to identify SEHs during each time interval from FUswith high FEI in a city or nearby areas. In this section, we introducethe variable definitions, objective function, and constraints of themodel.The decision variable represents whether FU belongs toSEH . To calculate the average HPP in each SEH, we introducea binary auxiliary variable , , which indicates whether FU and belong to SEH simultaneously. The objective function inEquation (10) is to maximize the average HPP in each SEH, where , is the HPP between FU and .The constraint in Equation (11) limits each FU to appear in onlyone SEH. Equation (12) limits the minimum and maximum numberof FUs in each SEH. Equation (13) limits the minimum numberof orders in each SEH, where is the number of orders of FU .Equation (14) and Equation (15) ensure that , = 1 if and only if"
}